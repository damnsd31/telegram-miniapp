<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</title>
  <style>
    html, body {
      padding: 0;
      margin: 0;
      font-family: system-ui, sans-serif;
      background-color: #1e1e1e;
      color: #eaeaea;
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
      font-size: 16px;
    }

    main {
      width: 100%;
      max-width: 420px;
      padding: 24px 16px 80px;
      box-sizing: border-box;
    }

    h1, h2 {
      text-align: center;
      margin-bottom: 24px;
    }

    .button, button {
      display: block;
      width: 100%;
      padding: 14px;
      margin: 10px auto;
      font-size: 17px;
      background-color: #2a2a2a;
      border: 1px solid #444;
      border-radius: 12px;
      color: #eaeaea;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .button:hover, button:hover {
      background-color: #383838;
    }

    input[type="text"], input[type="datetime-local"] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #555;
      background-color: #2a2a2a;
      color: #eaeaea;
      box-sizing: border-box;
      margin-bottom: 12px;
    }

    .card {
      background-color: #2a2a2a;
      border: 1px solid #444;
      border-radius: 10px;
      padding: 12px 16px;
      margin-bottom: 16px;
    }

    .card-title {
      font-weight: bold;
      font-size: 17px;
    }

    .card-sub {
      font-size: 15px;
      color: #aaa;
      margin-bottom: 8px;
    }

    .actions {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .actions button {
      flex: 1;
      margin: 4px 0;
    }

    .back-button {
      font-size: 14px;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <main>
    <h1>–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</h1>
    <div id="app">
      <div id="menu">
        <button onclick="showCases()">üìÅ –ú–æ–∏ –¥–µ–ª–∞</button>
        <button onclick="alert('–°–∫–æ—Ä–æ!')">üîç –ù–∞–π—Ç–∏ –ø—Ä–∞–∫—Ç–∏–∫—É</button>
        <button onclick="Telegram.WebApp.close()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>

      <div id="cases" class="hidden">
        <h2>–ú–æ–∏ –¥–µ–ª–∞</h2>
        <input type="text" id="caseSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –Ω–æ–º–µ—Ä—É" oninput="renderCases()">
        <div id="caseList"></div>
        <button onclick="addCase()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –¥–µ–ª–æ</button>
        <button class="back-button" onclick="showMenu()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
      </div>

      <div id="hearings" class="hidden">
        <h2>–ó–∞—Å–µ–¥–∞–Ω–∏—è</h2>
        <div id="hearingList"></div>
        <input type="datetime-local" id="hearingDate">
        <input type="text" id="hearingComment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
        <button onclick="addHearing()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞—Å–µ–¥–∞–Ω–∏–µ</button>
        <button class="back-button" onclick="showCases()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ –¥–µ–ª–∞–º</button>
      </div>

      <div id="tasks" class="hidden">
        <h2>–ó–∞–¥–∞—á–∏</h2>
        <p>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p>
        <button class="back-button" onclick="showCases()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ –¥–µ–ª–∞–º</button>
      </div>
    </div>
  </main>

  <script>
    let cases = [
      {
        name: '–û–û–û ¬´–ó–ê–ë–ê–í–ê¬ª',
        number: '–ê40-1231233/2024',
        hearings: [
          { date: '2025-08-14T06:20', comment: '–û—Å–ø–∞—Ä–∏–≤–∞–Ω–∏–µ, –ø—Ä–∏–Ω–µ—Å—Ç–∏ –¥–∫–ø –Ω–∞ —Ç–∞—á–∫—É' }
        ]
      }
    ];

    let currentCaseIndex = 0;

    function showMenu() {
      hideAll();
      document.getElementById('menu').classList.remove('hidden');
    }

    function showCases() {
      hideAll();
      document.getElementById('cases').classList.remove('hidden');
      renderCases();
    }

    function showHearings(index) {
      hideAll();
      currentCaseIndex = index;
      document.getElementById('hearings').classList.remove('hidden');
      renderHearings();
    }

    function showTasks(index) {
      hideAll();
      currentCaseIndex = index;
      document.getElementById('tasks').classList.remove('hidden');
    }

    function hideAll() {
      document.querySelectorAll('#app > div').forEach(el => el.classList.add('hidden'));
    }

    function renderCases() {
      const list = document.getElementById('caseList');
      const query = document.getElementById('caseSearch').value.toLowerCase();
      list.innerHTML = '';
      cases.forEach((c, index) => {
        if (
          c.name.toLowerCase().includes(query) ||
          c.number.toLowerCase().includes(query)
        ) {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="card-title">üìÅ ${c.name}</div>
            <div class="card-sub">‚Ññ ${c.number}</div>
            <div class="actions">
              <button onclick="showHearings(${index})">üìÖ –ó–∞—Å–µ–¥–∞–Ω–∏—è</button>
              <button onclick="showTasks(${index})">üìå –ó–∞–¥–∞—á–∏</button>
            </div>
          `;
          list.appendChild(card);
        }
      });
    }

    function renderHearings() {
      const container = document.getElementById('hearingList');
      const hlist = cases[currentCaseIndex].hearings;
      container.innerHTML = hlist.map(h => {
        const date = new Date(h.date).toLocaleString('ru-RU');
        return `<div class="card">${date} ‚Äî ${h.comment}</div>`;
      }).join('');
    }

    function addHearing() {
      const date = document.getElementById('hearingDate').value;
      const comment = document.getElementById('hearingComment').value;
      if (date) {
        cases[currentCaseIndex].hearings.push({ date, comment });
        document.getElementById('hearingDate').value = '';
        document.getElementById('hearingComment').value = '';
        renderHearings();
      }
    }

    function addCase() {
      const name = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–∏–∫–∞');
      const number = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–µ–ª–∞');
      if (name && number) {
        cases.push({ name, number, hearings: [] });
        renderCases();
      }
    }

    showMenu();
  </script>
</body>
</html>
